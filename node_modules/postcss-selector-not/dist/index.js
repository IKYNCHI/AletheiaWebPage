"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
<<<<<<< HEAD

var _postcss = require("postcss");

var _postcss2 = _interopRequireDefault(_postcss);

var _list = require("postcss/lib/list");

var _list2 = _interopRequireDefault(_list);

var _balancedMatch = require("balanced-match");

var _balancedMatch2 = _interopRequireDefault(_balancedMatch);
=======
exports.default = void 0;

var _list = _interopRequireDefault(require("postcss/lib/list"));

var _balancedMatch = _interopRequireDefault(require("balanced-match"));
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function explodeSelector(pseudoClass, selector) {
<<<<<<< HEAD
  var position = locatePseudoClass(selector, pseudoClass);
  if (selector && position > -1) {
    var pre = selector.slice(0, position);
    var matches = (0, _balancedMatch2.default)("(", ")", selector.slice(position));
=======
  const position = locatePseudoClass(selector, pseudoClass);

  if (selector && position > -1) {
    const pre = selector.slice(0, position);
    const matches = (0, _balancedMatch.default)("(", ")", selector.slice(position));
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0

    if (!matches) {
      return selector;
    }

<<<<<<< HEAD
    var bodySelectors = matches.body ? _list2.default.comma(matches.body).map(function (s) {
      return explodeSelector(pseudoClass, s);
    }).join(`)${pseudoClass}(`) : "";
    var postSelectors = matches.post ? explodeSelector(pseudoClass, matches.post) : "";

    return `${pre}${pseudoClass}(${bodySelectors})${postSelectors}`;
  }
  return selector;
}

var patternCache = {};

function locatePseudoClass(selector, pseudoClass) {
  patternCache[pseudoClass] = patternCache[pseudoClass] || new RegExp(`([^\\\\]|^)${pseudoClass}`);

  // The regex is used to ensure that selectors with
  // escaped colons in them are treated properly
  // Ex: .foo\:not-bar is a valid CSS selector
  // But it is not a reference to a pseudo selector
  var pattern = patternCache[pseudoClass];
  var position = selector.search(pattern);

  if (position === -1) {
    return -1;
  }

  // The offset returned by the regex may be off by one because
  // of it including the negated character match in the position
=======
    const bodySelectors = matches.body ? _list.default.comma(matches.body).map(s => explodeSelector(pseudoClass, s)).join(`)${pseudoClass}(`) : "";
    const postSelectors = matches.post ? explodeSelector(pseudoClass, matches.post) : "";
    return `${pre}${pseudoClass}(${bodySelectors})${postSelectors}`;
  }

  return selector;
}

const patternCache = {};

function locatePseudoClass(selector, pseudoClass) {
  patternCache[pseudoClass] = patternCache[pseudoClass] || new RegExp(`([^\\\\]|^)${pseudoClass}`); // The regex is used to ensure that selectors with
  // escaped colons in them are treated properly
  // Ex: .foo\:not-bar is a valid CSS selector
  // But it is not a reference to a pseudo selector

  const pattern = patternCache[pseudoClass];
  const position = selector.search(pattern);

  if (position === -1) {
    return -1;
  } // The offset returned by the regex may be off by one because
  // of it including the negated character match in the position


>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
  return position + selector.slice(position).indexOf(pseudoClass);
}

function explodeSelectors(pseudoClass) {
<<<<<<< HEAD
  return function () {
    return function (css) {
      css.walkRules(function (rule) {
        if (rule.selector && rule.selector.indexOf(pseudoClass) > -1) {
          rule.selector = explodeSelector(pseudoClass, rule.selector);
        }
      });
=======
  return () => {
    return {
      postcssPlugin: "postcss-selector-not",
      Rule: rule => {
        if (rule.selector && rule.selector.indexOf(pseudoClass) > -1) {
          rule.selector = explodeSelector(pseudoClass, rule.selector);
        }
      }
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
    };
  };
}

<<<<<<< HEAD
exports.default = _postcss2.default.plugin("postcss-selector-not", explodeSelectors(":not"));
module.exports = exports.default;
=======
const creator = explodeSelectors(":not");
creator.postcss = true;
var _default = creator;
exports.default = _default;
>>>>>>> d9d57759386cbc64761f26a577729c9da898f4b0
